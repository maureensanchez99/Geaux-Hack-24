@page "/dprk"
@rendermode InteractiveServer
@using Google.Cloud.Firestore;

<PageTitle>DPRK</PageTitle>

<div class="split">
    <div class="left-section">
        <h1>Country: North Korea</h1>
        <h2>City: Pyongyang</h2>
    </div>
    <div class="right-section">
        <div class="flag-img"/>
    </div>
</div>          

<div class="breakdown">
    <h1 class="bd-title">Breakdown</h1>
    <div class="info">
        <h3 class="weather"> Weather</h3>
            <ul>
                <li>Spring: </li>
                <li>Summer: </li>
                <li>Fall: </li>
                <li>Winter: </li>
            </ul>
        <h3 class="languages">Languages</h3>
            <ol>
               <li>Korean</li> 
               <li>Mandarin</li> 
               <li>Russian</li> 
            </ol>
        <h3 class="finances">Finances</h3>
        <h3 class="legal-tips">Legal Tips</h3>
    </div>
</div>

<style>
    .split {
        display: flex;
    }
    .left-section {
        font-family: 'Abril Fatface';
        width: 45%;
        float: left;
        clear: both;
        padding: 20px;
        margin: 20px 20px 20px 20px;
        border-radius: 5px;
    }
    .right-section {
        width: 45%;
        padding: 20px;
        float: right;
        clear: both;
        margin: 20px 20px 20px 20px;
        border-radius: 5px;
    }
    .flag-img {
        width: 250px;
        height: 200px;
        background-size: cover;
        background-position: center;
        background-image: url('images/dprk_flag.png');
    }
    .breakdown {
        clear: both;
        background-color: #96C5A7;
        border-radius: 5px;
    }
    .bd-title {
        font-family: 'Abril Fatface';
        padding: 25px 0px 0px 25px;        
    }
    .info {
        padding-left: 30px;
    }
</style>

@code {
    FirebaseDb db = FirebaseDb.Create("");

 public class c_countries
    {
        public string s_id {get;set;}
        public string s_flagPath {get;set;}
        public string s_page {get;set;}

        public string

    }
    private IEnumerable<c_countries> IE_countries = Array.Empty<c_countries>();
    
     protected override async Task OnInitializedAsync()
    {
        await refreshList();
    }

    private async Task refreshList()
    {
        CollectionReference cr_countries = db.Collection("Countries");
        QuerySnapshot qs_countries = await cr_countries.GetSnapshotAsync();

        var lst = new List<c_countries>();
            foreach (var country in qs_countries.Documents)
            {
                lst.Add(new c_countries{s_id = country.Id, s_cityPath = country.GetValue<string>("cityPath"), s_page = country.GetValue<string>("page")});
            }
        IE_countries = lst;

    
    }
}